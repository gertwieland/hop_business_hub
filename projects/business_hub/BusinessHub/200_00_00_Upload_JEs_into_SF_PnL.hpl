<pipeline>
  <info>
    <name>200_00_00_Upload_JEs_into_SF_PnL</name>
    <name_sync_with_filename>Y</name_sync_with_filename>
    <description/>
    <extended_description/>
    <pipeline_version/>
    <pipeline_type>Normal</pipeline_type>
    <pipeline_status>0</pipeline_status>
    <directory>/BusinessHub</directory>
    <parameters>
    </parameters>
    <capture_transform_performance>N</capture_transform_performance>
    <transform_performance_capturing_delay>1000</transform_performance_capturing_delay>
    <transform_performance_capturing_size_limit>100</transform_performance_capturing_size_limit>
    <created_user>gert</created_user>
    <created_date>2022/02/22 16:33:34.536</created_date>
    <modified_user>gert</modified_user>
    <modified_date>2023/02/14 00:32:57.340</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
    <notepad>
      <note>Removed fields calculated 
by "Calendar" step.</note>
      <xloc>4704</xloc>
      <yloc>832</yloc>
      <width>242</width>
      <heigth>64</heigth>
      <fontname>Segoe UI</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>205</backgroundcolorgreen>
      <backgroundcolorblue>112</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>Set Transaction Name</note>
      <xloc>4256</xloc>
      <yloc>288</yloc>
      <width>199</width>
      <heigth>37</heigth>
      <fontname>Segoe UI</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>128</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>128</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>Enable cache/load all data</note>
      <xloc>2624</xloc>
      <yloc>224</yloc>
      <width>239</width>
      <heigth>37</heigth>
      <fontname>Segoe UI</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>205</backgroundcolorgreen>
      <backgroundcolorblue>112</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>Except settlements except for "Vivian's" FCC 410011875 and 737999999
(GL 21510701, Line Journal Origin Code SA only, as requested by Vivian)</note>
      <xloc>2336</xloc>
      <yloc>544</yloc>
      <width>638</width>
      <heigth>64</heigth>
      <fontname>Segoe UI</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>205</backgroundcolorgreen>
      <backgroundcolorblue>112</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>Tracked</note>
      <xloc>0</xloc>
      <yloc>0</yloc>
      <width>76</width>
      <heigth>37</heigth>
      <fontname>Segoe UI</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>205</backgroundcolorgreen>
      <backgroundcolorblue>112</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>Runs from UPDATE_60_SF</note>
      <xloc>608</xloc>
      <yloc>240</yloc>
      <width>215</width>
      <heigth>34</heigth>
      <fontname>Segoe UI</fontname>
      <fontsize>9</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>205</backgroundcolorgreen>
      <backgroundcolorblue>112</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
  <order>
    <hop>
      <from>Trim</from>
      <to>Modified JavaScript value</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Find FCC</from>
      <to>Find Sponsored Class</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Adjustments</from>
      <to>CamelCase Vendor Name</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>CamelCase Vendor Name</from>
      <to>Debit or Credit</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Cleansing, ReportingDate</from>
      <to>Dummy (do nothing)</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Select values</from>
      <to>Dummy (do nothing) 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Dummy (do nothing)</from>
      <to>Select values</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Error Date Transactions</from>
      <to>SF Transactions Error</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Transaction Upsert</from>
      <to>Error Date Transactions</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Only Transactions with FCC in SF</from>
      <to>Dummy (do nothing) 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Find RFIS Categories</from>
      <to>GL Lookup</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Leading Digits</from>
      <to>FCC_Original</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>FCC_Original</from>
      <to>Cleansing</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Cleansing</from>
      <to>Trim</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Debit or Credit</from>
      <to>Select values 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Select values 2</from>
      <to>Cleansing, ReportingDate</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Dummy (do nothing) 2</from>
      <to>Only Transactions with FCC in SF</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>UID</from>
      <to>Replace in string</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Dummy (do nothing) 3</from>
      <to>Find existing UIDs</to>
      <enabled>N</enabled>
    </hop>
    <hop>
      <from>Expense Transfer Direction</from>
      <to>Calculator</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Calculator</from>
      <to>Adjustments</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>GL Lookup</from>
      <to>PO Lookup</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>PO Lookup</from>
      <to>PO Line Lookup</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Vendor Lookup</from>
      <to>Find FCC</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>PO Line Lookup</from>
      <to>Vendor Lookup</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Replace in string</from>
      <to>If field value is null</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>null -> blank</from>
      <to>Set JE Name 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>If field value is null</from>
      <to>null -> blank</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Set JE Name 3</from>
      <to>Expense Transfer Direction</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>String operations</from>
      <to>UID</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Dummy (do nothing) 5</from>
      <to>Exclude Settlements 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Modified JavaScript value</from>
      <to>Find RFIS Categories</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Find Sponsored Class</from>
      <to>String operations</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>edw.EDW_POSTED_JOURNAL_COMBINED</from>
      <to>Leading Digits</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Find existing UIDs</from>
      <to>Exclude existing UIDs</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Exclude existing UIDs</from>
      <to>Dummy (do nothing) 5</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Dummy (do nothing) 4</from>
      <to>Transaction Upsert</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>PnL by Institute</from>
      <to>PnL - Define columns</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Exclude Settlements 2</from>
      <to>Dummy (do nothing) 4</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Dummy (do nothing) 3</from>
      <to>PnL by Institute</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Filter rows</from>
      <to>Insert / update</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>PnL - Define columns</from>
      <to>FCC</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Select values 4</from>
      <to>Foundation Support</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Foundation Support</from>
      <to>Recoveries Institute</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Select values 3</from>
      <to>Stream lookup</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Institutes</from>
      <to>Stream lookup</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Stream lookup</from>
      <to>IsInstitute</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>FCC</from>
      <to>Select values 4</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Recoveries Institute</from>
      <to>Rent and Parking</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>IsInstitute</from>
      <to>UID 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>UID 3</from>
      <to>Filter rows</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Rent and Parking</from>
      <to>Select values 3</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <transform>
    <name>Adjustments</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//var ExcludeForGrantAccounts = null;
//var ExcludeToBeDeleted = null;


//Due to max length in SF
if (JE_NAME_SF_LENGTH > 80 &amp;&amp; JE_Name_SF !== null) {
JE_Name_SF = substr(JE_Name_SF,80)
}

//Fix wrong OH allocation in RFIS. They show it as negative revenue, but it needs to be shown as expense.
if (TTH_ACCOUNT == '26970016') {
RFIS_Class = 'Expense'
RFIS_Type = 'Organizational Costs' //Was "Overhead" before, changed upon Suranga's request
RFIS_Category = 'Organizational Costs' //Was "Overhead" before, changed upon Suranga's request
}




//We are not bringing in Settlements anymore for regular account holders (only for exceptional accounts for Vivian)
//if( RFIS_Category == 'Settlement' )
//{
//		ExcludeForGrantAccounts = 'Hide settlements from Account Holders';
//}</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>JE_Name_SF</name>
        <rename>JE_Name_SF</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>RFIS_Class</name>
        <rename>RFIS_Class</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>RFIS_Type</name>
        <rename>RFIS_Type</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>RFIS_Category</name>
        <rename>RFIS_Category</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4832</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Calculator</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <failIfNoFile>Y</failIfNoFile>
    <calculation>
      <field_name>JE_NAME_SF_LENGTH</field_name>
      <calc_type>STRING_LEN</calc_type>
      <field_a>JE_Name_SF</field_a>
      <field_b/>
      <field_c/>
      <value_type>Integer</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask>0</conversion_mask>
      <decimal_symbol>.</decimal_symbol>
      <grouping_symbol>,</grouping_symbol>
      <currency_symbol/>
    </calculation>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4672</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>CamelCase Vendor Name</name>
    <type>StringOperations</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>Vendor_Name</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper/>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap>Y</init_cap>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
      <field>
        <in_stream_name>Vendor_Name_2</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper/>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap>Y</init_cap>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4992</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Cleansing</name>
    <type>ReplaceString</type>
    <description>Faster than I though
81002=28251000
89010=28257000

M:\01 Public Reports\01 Chart of Accounts\development\look up tool.xls



Linda Tonellato
Manager, Accounts payable
416-946-4501 xt 2540

From: Wieland, Gert &lt;Gert.Wieland@uhn.ca> 
Sent: May 25, 2021 10:47 AM
To: Tonellato, Linda &lt;Linda.Tonellato@uhn.ca>
Subject: Mapping 2 SmartStream GLs

Hi Linda,

I hope all‚Äôs good on your end üòä

Linda, we‚Äôve made huge progress with our Salesforce project. We are bringing over all journal entries because we need to be able to calculate lifetime totals.
For the 777 accounts, it‚Äôs been a bit tricky to calculate the lifetime totals, because data from before SAP (SmartStream) is needed.

I‚Äôm now able to calculate the lifetime balances that match RFIS to the cent for all but six of the 777 accounts.

To get these numbers right, I need to consider two of the old GL accounts from SmartStream: 89010 and 81002.

However, I can‚Äôt use the old GL accounts, I can only use the ‚Äúnew‚Äù 8-digit GL accounts from SAP.

Would you know to which SAP GL accounts I could map these two old accounts?

I‚Äôm also attaching an Excel file, it shows all related journal entries, and an overview of the affected FCCs.

Thanks so much Linda!

Gert
--
Gert Wieland
***Chat with me on MS Teams***
Business Intelligence Manager (RFS)
700 University Avenue (OPG), 4th Floor, Office 75
(416) 873 8256
</description>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>TTH_CENTER</in_stream_name>
        <out_stream_name/>
        <use_regex>yes</use_regex>
        <replace_string>^(000|UH)</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>VENDOR_ID</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>#####</replace_string>
        <replace_by_string/>
        <set_empty_string>Y</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>TTH_ACCOUNT</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>81002</replace_string>
        <replace_by_string>28251000</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>yes</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>TTH_ACCOUNT</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>89010</replace_string>
        <replace_by_string>28257000</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1472</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Cleansing, ReportingDate</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here
//var BA_FCC_GL = null;

//Flipping +/-, so revenues show positive and expenses show negative. (In SAP, it's the opposite).
//var AbsoluteAmount = null;

//Combination of FCC and GL account. Purpose is to match granularity of Budgets (not sure yet if this is the right approach)
//var FCC_GL = null;

var ReportingDate = null;
//var MinDate = new Date(1998,3,1)
//var MaxDate = new Date(2030,2,31)
//var NEW_EFFECTIVE_DATE = null;
var NEW_LINE_DATE_CREATED = null;
var NEW_CURRENCY_RATE_DATE = null;

ReportingDate = LINE_DATE_POSTED


if ( PRIMARY_AMOUNT !== null) {
PRIMARY_AMOUNT = PRIMARY_AMOUNT * (-1)
}

if ( TRANSACTION_AMOUNT !== null) {
TRANSACTION_AMOUNT = TRANSACTION_AMOUNT * (-1)
}



//Fix Effective Date outliers

switch (true) 
{
	case new Date(EFFECTIVE_DATE).getTime() &lt; new Date(1998,3,1).getTime():
		NEW_EFFECTIVE_DATE = new Date(1998,3,1);
		break;

	case new Date(EFFECTIVE_DATE).getTime() > new Date(2030,2,31).getTime():
		NEW_EFFECTIVE_DATE = new Date(2030,2,31);
		break;
	
	default:
		NEW_EFFECTIVE_DATE = EFFECTIVE_DATE
		break;
}

EFFECTIVE_DATE = NEW_EFFECTIVE_DATE

//Fix LINE_DATE_CREATED outliers
//switch (true) 
//{
//	case LINE_DATE_CREATED &lt; MinDate:
	//	NEW_LINE_DATE_CREATED = MinDate;
	//	break;

	//case LINE_DATE_CREATED > MaxDate:
//		NEW_LINE_DATE_CREATED = MaxDate;
//		break;
	
//	default:
//		NEW_LINE_DATE_CREATED = LINE_DATE_CREATED;
//		break;
//}

//LINE_DATE_CREATED = NEW_LINE_DATE_CREATED


//Fix CURRENCY_RATE_DATE outliers
//switch (true) 
//{
//	case CURRENCY_RATE_DATE &lt; MinDate:
//		NEW_CURRENCY_RATE_DATE = MinDate;
//		break;
//
//	case CURRENCY_RATE_DATE > MaxDate:
//		NEW_CURRENCY_RATE_DATE = MaxDate;
	//	break;
	
//	default:
//		NEW_CURRENCY_RATE_DATE = CURRENCY_RATE_DATE;
//		break;
//}

//CURRENCY_RATE_DATE = NEW_CURRENCY_RATE_DATE
</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>PRIMARY_AMOUNT</name>
        <rename>PRIMARY_AMOUNT</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>TRANSACTION_AMOUNT</name>
        <rename>TRANSACTION_AMOUNT</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>ReportingDate</name>
        <rename>ReportingDate</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>EFFECTIVE_DATE</name>
        <rename>EFFECTIVE_DATE</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>LINE_DATE_CREATED</name>
        <rename>LINE_DATE_CREATED</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>CURRENCY_RATE_DATE</name>
        <rename>CURRENCY_RATE_DATE</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>5056</xloc>
      <yloc>640</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Debit or Credit</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>DEBIT_CREDIT_CODE_1</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>C</replace_string>
        <replace_by_string>Credit</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>yes</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>DEBIT_CREDIT_CODE_1</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>D</replace_string>
        <replace_by_string>Debit</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>yes</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>5152</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Dummy (do nothing)</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>5056</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Dummy (do nothing) 2</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4512</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Dummy (do nothing) 3</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3872</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Dummy (do nothing) 4</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2160</xloc>
      <yloc>656</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Dummy (do nothing) 5</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2912</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Error Date Transactions</name>
    <type>SystemInfo</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>ErrorDate</name>
        <type>system date (variable)</type>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1744</xloc>
      <yloc>784</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Exclude Settlements 2</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>50</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <send_true_to>Dummy (do nothing) 4</send_true_to>
    <send_false_to/>
    <compare>
      <condition>
        <negated>N</negated>
        <conditions>
          <condition>
            <negated>N</negated>
            <leftvalue>UHN_PI_Expense_or_Revenue_Type__c</leftvalue>
            <function>&lt;></function>
            <rightvalue/>
            <value>
              <name>constant</name>
              <type>String</type>
              <text>Settlement</text>
              <length>-1</length>
              <precision>-1</precision>
              <isnull>N</isnull>
              <mask/>
            </value>
          </condition>
          <condition>
            <negated>N</negated>
            <operator>OR</operator>
            <conditions>
              <condition>
                <negated>N</negated>
                <conditions>
                  <condition>
                    <negated>N</negated>
                    <leftvalue>UHN_FCC_SAP_Id__c</leftvalue>
                    <function>=</function>
                    <rightvalue/>
                    <value>
                      <name>constant</name>
                      <type>String</type>
                      <text>410011875</text>
                      <length>-1</length>
                      <precision>-1</precision>
                      <isnull>N</isnull>
                      <mask/>
                    </value>
                  </condition>
                  <condition>
                    <negated>N</negated>
                    <operator>OR</operator>
                    <leftvalue>UHN_FCC_SAP_Id__c</leftvalue>
                    <function>=</function>
                    <rightvalue/>
                    <value>
                      <name>constant</name>
                      <type>String</type>
                      <text>737999999</text>
                      <length>-1</length>
                      <precision>-1</precision>
                      <isnull>N</isnull>
                      <mask/>
                    </value>
                  </condition>
                </conditions>
              </condition>
              <condition>
                <negated>N</negated>
                <operator>AND</operator>
                <leftvalue>UHN_GL_Account_SAP_Id__c</leftvalue>
                <function>=</function>
                <rightvalue/>
                <value>
                  <name>constant</name>
                  <type>String</type>
                  <text>21510701</text>
                  <length>-1</length>
                  <precision>-1</precision>
                  <isnull>N</isnull>
                  <mask/>
                </value>
              </condition>
              <condition>
                <negated>N</negated>
                <operator>AND</operator>
                <leftvalue>UHN_Origin_Code__c</leftvalue>
                <function>=</function>
                <rightvalue/>
                <value>
                  <name>constant</name>
                  <type>String</type>
                  <text>SA</text>
                  <length>-1</length>
                  <precision>-1</precision>
                  <isnull>N</isnull>
                  <mask/>
                </value>
              </condition>
            </conditions>
          </condition>
        </conditions>
      </condition>
    </compare>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2592</xloc>
      <yloc>656</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Exclude existing UIDs</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>50</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <send_true_to>Dummy (do nothing) 5</send_true_to>
    <send_false_to/>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>UID_AlreadyInSF</leftvalue>
        <function>IS NULL</function>
        <rightvalue/>
      </condition>
    </compare>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3264</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Expense Transfer Direction</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here

var ExpenseTransferDirection = null;

if (DESCRIPTION !== null &amp;&amp; DESCRIPTION !== '') {

switch (true) {

	case DESCRIPTION.indexOf('T/F') >= 0 &amp;&amp; PRIMARY_DEBIT_CREDIT_CODE == 'C':
		ExpenseTransferDirection = 'Transfer out (Credit)';
		break;


	case DESCRIPTION.indexOf('T/F') >= 0 &amp;&amp; PRIMARY_DEBIT_CREDIT_CODE == 'D':
		ExpenseTransferDirection = 'Transfer in (Debit)';
		break;

}



}</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>ExpenseTransferDirection</name>
        <rename>ExpenseTransferDirection</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4512</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>FCC</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>Y</cache>
    <cache_load_all>Y</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>salesforce_dim</schema>
      <table>FCC</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>UHN_FCC_SAP_Id__c</name>
        <field>SAP Id</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>Level_4_Description</name>
        <rename>Level_4_Description</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>Level_5_Description</name>
        <rename>Level_5_Description</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>Institute_SAP_ID</name>
        <rename>Institute_SAP_ID</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3664</xloc>
      <yloc>1040</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>FCC_Original</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <failIfNoFile>Y</failIfNoFile>
    <calculation>
      <field_name>FCC_Original</field_name>
      <calc_type>COPY_FIELD</calc_type>
      <field_a>TTH_CENTER</field_a>
      <field_b/>
      <field_c/>
      <value_type>String</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask/>
      <decimal_symbol/>
      <grouping_symbol/>
      <currency_symbol/>
    </calculation>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1296</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Filter rows</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <send_true_to>Insert / update</send_true_to>
    <send_false_to/>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>PnL_Category</leftvalue>
        <function>IS NOT NULL</function>
        <rightvalue/>
      </condition>
    </compare>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1728</xloc>
      <yloc>1168</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Filter rows 2</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <send_true_to/>
    <send_false_to/>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>PnL_Category</leftvalue>
        <function>=</function>
        <rightvalue/>
        <value>
          <name>constant</name>
          <type>String</type>
          <text>Rent, parking, other recoveries</text>
          <length>-1</length>
          <precision>-1</precision>
          <isnull>N</isnull>
          <mask/>
        </value>
      </condition>
    </compare>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2560</xloc>
      <yloc>928</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Find FCC</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>Y</cache>
    <cache_load_all>Y</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>salesforce_dim</schema>
      <table>FCC</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>Y</eat_row_on_failure>
      <key>
        <name>TTH_CENTER</name>
        <field>SAP Id</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>Record ID</name>
        <rename>FCC_SF</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>Sponsor</name>
        <rename>Sponsor_ID_SF</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>Sponsor_SAP_ID</name>
        <rename>Sponsor_ID_SAP</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3328</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Find RFIS Categories</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>Y</cache>
    <cache_load_all>Y</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>rfis</schema>
      <table>RFIS_CategoriesFromExcelFile</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>TTH_ACCOUNT</name>
        <field>GL_Account</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>RFIS_Class</name>
        <rename>RFIS_Class</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>RFIS_Type</name>
        <rename>RFIS_Type</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>RFIS_Category</name>
        <rename>RFIS_Category</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2416</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Find Sponsored Class</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>Y</cache>
    <cache_load_all>Y</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>bihelper</schema>
      <table>SponsoredClass_FromExcelFile</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>TTH_ACCOUNT</name>
        <field>GL_Account</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>SponsoredClass</name>
        <rename>SponsoredClass</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>SponseredClassName</name>
        <rename>SponsoredClass_Detail</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3552</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Find existing UIDs</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>50</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>N</cache>
    <cache_load_all>Y</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>salesforce_fact</schema>
      <table>Transactions</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>UHN_UID__c</name>
        <field>UID</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>UID</name>
        <rename>UID_AlreadyInSF</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3552</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Foundation Support</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>// Calculation for "Foundation Support" in P+L by institute
	//This section looks for specific GL accounts. No allocation needed because entries are posted directly to the institutes

if	(
	trim(FCC_Level_4_Description) == "CORE INSTITUTES"
	&amp;&amp; substr(GL_Account,0,5) == "21405"
		) 
		{
//No Allocation needed, costs posted directly to institutes
PnL_Category = "Foundation Support";
PnL_SAP_ID_Entity = Institute_SAP_ID

//If the rule above applies, then increase the number of rules for the current Journal Entry by one...
PnL_NumberOfRules = PnL_NumberOfRules + 1;

//... and add the rule to the existing list of rules. At the very end, there should be max 1 rule per Journal Entry
PnL_ListOfRules = PnL_ListOfRules.concat(num2str(PnL_NumberOfRules)).concat(": ").concat(PnL_Category).concat(" (Core Institutes)")
	}


//This section looks for specific GL accounts posted in the "BUILDING AND TENANTS" node.
//PMCRT
if (	
(	
	trim(FCC_Level_5_Description) == "PMCRT" 
	|| trim(FCC_Level_5_Description) == "TENANTS LEASED PROPERTIES"
)
	&amp;&amp; substr(GL_Account,0,3) == "214"
   )
{
//Assign to PMCC;
PnL_Category = "Foundation Support";
PnL_SAP_ID_Entity = "100R02A01";//PMCC


//If the rule above applies, then increase the number of rules for the current Journal Entry by one...
PnL_NumberOfRules = PnL_NumberOfRules +1;

//... and add the rule to the existing list of rules. At the very end, there should be max 1 rule per Journal Entry
PnL_ListOfRules = PnL_ListOfRules.concat(num2str(PnL_NumberOfRules)).concat(": ").concat(PnL_Category).concat(" (PMCC)")
}


//KDT - KREMBIL DISCOVERY TOWER
//Assign to Krembil
if (
	trim(FCC_Level_5_Description) == "KREMBIL DISCOVERY TOWER"
	&amp;&amp; substr(GL_Account,0,3) == "214"
)

{
PnL_Institute_Category = "Foundation Support";
PnL_SAP_ID_Entity = '100R02C01' //Assign to Krembil


//If the rule above applies, then increase the number of rules for the current Journal Entry by one...
PnL_NumberOfRules = PnL_NumberOfRules +1;

//... and add the rule to the existing list of rules. At the very end, there should be max 1 rule per Journal Entry
PnL_ListOfRules = PnL_ListOfRules.concat(num2str(PnL_NumberOfRules)).concat(": ").concat(PnL_Category).concat(" (Krembil)")
}

</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>PnL_Category</name>
        <rename>PnL_Category</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_NumberOfRules</name>
        <rename>PnL_NumberOfRules</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_ListOfRules</name>
        <rename>PnL_ListOfRules</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_SAP_ID_Entity</name>
        <rename>PnL_SAP_ID_Entity</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3280</xloc>
      <yloc>1040</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>GL Lookup</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>Y</cache>
    <cache_load_all>Y</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>salesforce_dim</schema>
      <table>GL_Account</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>TTH_ACCOUNT</name>
        <field>GL_Account_SAP</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>GL_Account_SF_ID</name>
        <rename>GL_Account_SF</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2608</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>If field value is null</name>
    <type>IfNull</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <replaceAllByValue/>
    <replaceAllMask/>
    <selectFields>Y</selectFields>
    <selectValuesType>N</selectValuesType>
    <setEmptyStringAll>N</setEmptyStringAll>
    <valuetypes>
      </valuetypes>
    <fields>
      <field>
        <name>ShortDescription_POLINE</name>
        <value/>
        <mask/>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4192</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Insert / update</name>
    <type>InsertUpdate</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <commit>100</commit>
    <update_bypassed>N</update_bypassed>
    <lookup>
      <schema>pnl</schema>
      <table>PnL_by_Institute</table>
      <key>
        <name>UID</name>
        <field>UID</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>UID</name>
        <rename>UID</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UID_Transaction</name>
        <rename>UID_Transaction</rename>
        <update>Y</update>
      </value>
      <value>
        <name>PnL_Category</name>
        <rename>PnL_Category</rename>
        <update>Y</update>
      </value>
      <value>
        <name>PnL_ListOfRules</name>
        <rename>PnL_ListOfRules</rename>
        <update>Y</update>
      </value>
      <value>
        <name>PnL_NumberOfRules</name>
        <rename>PnL_NumberOfRules</rename>
        <update>Y</update>
      </value>
      <value>
        <name>PnL_SAP_ID_Entity</name>
        <rename>PnL_SAP_ID_Entity</rename>
        <update>Y</update>
      </value>
      <value>
        <name>Amount</name>
        <rename>UHN_Amount__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>FCC</name>
        <rename>UHN_FCC_SAP_Id__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>IsInstitute</name>
        <rename>IsInstitute</rename>
        <update>Y</update>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1536</xloc>
      <yloc>1168</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Institutes</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <sql>SELECT

  Institute_ID_SAP 

FROM salesforce_dim.Institute
where Institute_Name_Short is not null
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <cached_row_meta_active>N</cached_row_meta_active>
    <row-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>Institute_ID_SAP</name>
        <length>20</length>
        <precision>-1</precision>
        <origin>Table input</origin>
        <comments>Institute_ID_SAP</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
    </row-meta>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2208</xloc>
      <yloc>1040</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>IsInstitute</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here

if (IsInstitute !== null) {
	IsInstitute = "Yes"
} else {
	IsInstitute = "No"
}</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>IsInstitute</name>
        <rename>IsInstitute</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2080</xloc>
      <yloc>1168</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Leading Digits</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here
// UH777 accounts and 777 accounts are not the same.
var FCC_Leading_Digits = null;


switch(true) {

	case substr(TTH_CENTER,0,2) == 'UH':
	FCC_Leading_Digits = 'UH';
	break;

	case substr(TTH_CENTER,0,3) == '000':
	FCC_Leading_Digits = substr(TTH_CENTER,3,3)
	break;

	default:
	FCC_Leading_Digits = substr(TTH_CENTER,0,3)
	
}
</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>FCC_Leading_Digits</name>
        <rename>FCC_Leading_Digits</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1104</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Modified JavaScript value</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>if (PURCHASE_ORDER_NUMBER === null) {
PURCHASE_ORDER_LINE = null;
}</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>PURCHASE_ORDER_LINE</name>
        <rename>PURCHASE_ORDER_LINE</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1856</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Only Transactions with FCC in SF</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <send_true_to>Dummy (do nothing) 3</send_true_to>
    <send_false_to/>
    <compare>
      <condition>
        <negated>N</negated>
        <conditions>
          <condition>
            <negated>N</negated>
            <leftvalue>UHN_FCC__c</leftvalue>
            <function>IS NOT NULL</function>
            <rightvalue/>
          </condition>
        </conditions>
      </condition>
    </compare>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4192</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>PO Line Lookup</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>50</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>N</cache>
    <cache_load_all>N</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>edw</schema>
      <table>EDW_PURCHASE_ORDER_LINE</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>PURCHASE_ORDER_NUMBER</name>
        <field>PURCHASE_ORDER_NUMBER</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>PURCHASE_ORDER_LINE</name>
        <field>PURCHASE_ORDER_LINE_NUMBER</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>VENDOR_ITEM_ID</name>
        <rename>Vendor_Item_ID_POLINE</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>SHORT_DESCRIPTION</name>
        <rename>ShortDescription_POLINE</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>QUANTITY</name>
        <rename>PurchasedQuantity_POLINE</rename>
        <default/>
        <type>Integer</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2912</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>PO Lookup</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>50</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>N</cache>
    <cache_load_all>N</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>edw</schema>
      <table>EDW_PURCHASE_ORDER</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>PURCHASE_ORDER_NUMBER</name>
        <field>PURCHASE_ORDER_NUMBER</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>VENDOR_ID</name>
        <rename>VENDOR_ID_POs</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2752</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>PnL - Define columns</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here

var PnL_Category = '';
var PnL_ListOfRules = '';
var PnL_NumberOfRules = 0;
var PnL_SAP_ID_Entity = '';


</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>PnL_Category</name>
        <rename>PnL_Category</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>PnL_ListOfRules</name>
        <rename>PnL_ListOfRules</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>PnL_SAP_ID_Entity</name>
        <rename>PnL_SAP_ID_Entity</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>PnL_NumberOfRules</name>
        <rename>PnL_NumberOfRules</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3856</xloc>
      <yloc>1040</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>PnL by Institute</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3872</xloc>
      <yloc>928</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Recoveries Institute</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here
//PnL_Institute_OrgCostElement = null;
//AllocationKey_PnL_Institute_OrgCosts = null;
//PnL_Institute_Category = null;



// Calculation for "Recoveries Institute" in P+L by institute
	//This section looks for specific GL accounts. No allocation needed because entries are posted directly to the institutes

if (
	trim(FCC_Level_4_Description) == "CORE INSTITUTES"
	&amp;&amp; UHN_FCC_SAP_Id__c != "737103001"
	&amp;&amp; substr(GL_Account,0,3) == "212"
	&amp;&amp; substr(GL_Account,0,5) != "21405"

)

{
//PnL_Institute_OrgCostElement = "CHANGE ACCORDINGLY"; -> No Allocation needed, costs posted directly to institutes
PnL_Category = "Recoveries Institute";
PnL_SAP_ID_Entity = Institute_SAP_ID;

//If the rule above applies, then increase the number of rules for the current Journal Entry by one...
PnL_NumberOfRules = PnL_NumberOfRules +1;

//... and add the rule to the existing list of rules. At the very end, there should be max 1 rule per Journal Entry
PnL_ListOfRules = PnL_ListOfRules.concat(num2str(PnL_NumberOfRules)).concat(": ").concat(PnL_Category).concat(" ")
}



//BEGIN Calculation of Allocation Key
//MonthNumeric = month(Date_Key)+1

//CalendarQuarterNumeric = ceil(MonthNumeric/3)

//CalendarQuarter = "Q".concat(num2str(CalendarQuarterNumeric))

//CalendarYear = year(Date_Key)

//FiscalQuarter = replace(CalendarQuarter,"Q1","Q4","Q2","Q1","Q3","Q2","Q4","Q3")

//if(MonthNumeric &lt;=3) { 
//FiscalYear = CalendarYear
//} else { 
//FiscalYear = CalendarYear +1
//}

//FiscalYearFiscalQuarter = num2str(FiscalYear,"0").concat(FiscalQuarter)

//AllocationKey_PnL_Institute_OrgCosts = num2str(FiscalYear,"0").concat("-").concat(FiscalQuarter).concat("-").concat(PnL_Institute_OrgCostElement)
//END Calculation of Allocation Key


</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>PnL_Category</name>
        <rename>PnL_Category</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_SAP_ID_Entity</name>
        <rename>PnL_SAP_ID_Entity</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_ListOfRules</name>
        <rename>PnL_ListOfRules</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_NumberOfRules</name>
        <rename>PnL_NumberOfRules</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3056</xloc>
      <yloc>1040</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Rent and Parking</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Script here

//PnL_Institute_OrgCostElement = null;

//AllocationKey_PnL_Institute_OrgCosts = null;

//PnL_Institute_Category = null;



// Calculation for "Rent and Parking" in P+L by institute
	//PMCRT
if
(
	trim(FCC_Level_5_Description) == "PMCRT"
	&amp;&amp; substr(GL_Account,0,2) == "21"
	&amp;&amp; substr(GL_Account,0,3) != "214"
	&amp;&amp; substr(GL_Account,0,3) != "215"
	&amp;&amp; GL_Account != "21212014"
)

{
//PnL_Institute_OrgCostElement = "RENTANDPARKING - PMCRT";
PnL_Category = "Rent, parking, other recoveries";
PnL_SAP_ID_Entity = "100R02A01";//PMCC

//If the rule above applies, then increase the number of rules for the current Journal Entry by one...
PnL_NumberOfRules = PnL_NumberOfRules +1;

//... and add the rule to the existing list of rules. At the very end, there should be max 1 rule per Journal Entry
PnL_ListOfRules = PnL_ListOfRules.concat(num2str(PnL_NumberOfRules)).concat(": ").concat(PnL_Category).concat(" (PMCC)")
}


//KDT - KREMBIL DISCOVERY TOWER
if
(
	trim(FCC_Level_5_Description) == "KREMBIL DISCOVERY TOWER"
	&amp;&amp; substr(GL_Account,0,2) == "21"
	&amp;&amp; substr(GL_Account,0,3) != "214"
	&amp;&amp; substr(GL_Account,0,3) != "215"
	&amp;&amp; GL_Account != "21212014"
)

{
//PnL_Institute_OrgCostElement = "RENTANDPARKING - KDT";
PnL_Category = "Rent, parking, other recoveries";
PnL_SAP_ID_Entity = '100R02C01' //Assign to Krembil

//If the rule above applies, then increase the number of rules for the current Journal Entry by one...
PnL_NumberOfRules = PnL_NumberOfRules +1;

//... and add the rule to the existing list of rules. At the very end, there should be max 1 rule per Journal Entry
PnL_ListOfRules = PnL_ListOfRules.concat(num2str(PnL_NumberOfRules)).concat(": ").concat(PnL_Category).concat(" (Krembil)")
}




//TLP - TENANTS - LEASED PROPERTIES
//if (	
//(
//ExcludeFrom_PnLbyInstitute === null
//)
//&amp;&amp;
//(
//trim(FCC_Level_5_Description) == "TENANTS - LEASED PROPERTIES"
	//&amp;&amp; substr(GL_Account,0,2) == "21"
//	&amp;&amp; substr(GL_Account,0,3) != "214"
//	&amp;&amp; substr(GL_Account,0,3) != "215"
//	&amp;&amp; GL_Account != "21212014"
//)
//)
//{
//PnL_Institute_OrgCostElement = "RENTANDPARKING - TLP";
//PnL_Institute_Category = "Rent, parking, other recoveries";

//If the rule above applies, then increase the number of rules for the current Journal Entry by one...
//PnL_Institute_NumberOfRules = PnL_Institute_NumberOfRules +1;

//... and add the rule to the existing list of rules. At the very end, there should be max 1 rule per Journal Entry
//PnL_Institute_ListOfRules = PnL_Institute_ListOfRules.concat(num2str(PnL_Institute_NumberOfRules)).concat(": ").concat(PnL_Institute_Category).concat(" ")
//}







//BEGIN Calculation of Allocation Key
//MonthNumeric = month(Date_Key)+1

//CalendarQuarterNumeric = ceil(MonthNumeric/3)

//CalendarQuarter = "Q".concat(num2str(CalendarQuarterNumeric))

//CalendarYear = year(Date_Key)

//FiscalQuarter = replace(CalendarQuarter,"Q1","Q4","Q2","Q1","Q3","Q2","Q4","Q3")

//if(MonthNumeric &lt;=3) { 
//FiscalYear = CalendarYear
//} else { 
//FiscalYear = CalendarYear +1
//}

//FiscalYearFiscalQuarter = num2str(FiscalYear,"0").concat(FiscalQuarter)

//AllocationKey_PnL_Institute_OrgCosts = num2str(FiscalYear,"0").concat("-").concat(FiscalQuarter).concat("-").concat(PnL_Institute_OrgCostElement)
//END Calculation of Allocation Key


</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>PnL_Category</name>
        <rename>PnL_Category</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_NumberOfRules</name>
        <rename>PnL_NumberOfRules</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_ListOfRules</name>
        <rename>PnL_ListOfRules</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
      <field>
        <name>PnL_SAP_ID_Entity</name>
        <rename>PnL_SAP_ID_Entity</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2816</xloc>
      <yloc>1040</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Replace in string</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Uhn</replace_string>
        <replace_by_string>UHN</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Cihr</replace_string>
        <replace_by_string>CIHR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Grir</replace_string>
        <replace_by_string>GRIR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Idc</replace_string>
        <replace_by_string>IDC</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>yes</use_regex>
        <replace_string>\"+</replace_string>
        <replace_by_string>"</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Uhn</replace_string>
        <replace_by_string>UHN</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Riscst</replace_string>
        <replace_by_string>RISCST</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Rism</replace_string>
        <replace_by_string>RISM</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Cihr</replace_string>
        <replace_by_string>CIHR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Grir</replace_string>
        <replace_by_string>GRIR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Idc</replace_string>
        <replace_by_string>IDC</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <use_regex>yes</use_regex>
        <replace_string>\"+</replace_string>
        <replace_by_string>"</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>ShortDescription_POLINE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string> rna </replace_string>
        <replace_by_string> RNA </replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>ShortDescription_POLINE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string> dnA </replace_string>
        <replace_by_string> DNA </replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>ShortDescription_POLINE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Dna/</replace_string>
        <replace_by_string>DNA/</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>ShortDescription_POLINE</in_stream_name>
        <out_stream_name/>
        <use_regex>yes</use_regex>
        <replace_string>\"+</replace_string>
        <replace_by_string>"</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>Vendor_Name</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Uhn</replace_string>
        <replace_by_string>UHN</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>Vendor_Name</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Cihr</replace_string>
        <replace_by_string>CIHR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>Vendor_Name</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Grir</replace_string>
        <replace_by_string>GRIR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>Vendor_Name_2</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Uhn</replace_string>
        <replace_by_string>UHN</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>Vendor_Name_2</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Cihr</replace_string>
        <replace_by_string>CIHR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
      <field>
        <in_stream_name>Vendor_Name_2</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>Grir</replace_string>
        <replace_by_string>GRIR</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
        <is_unicode>no</is_unicode>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4064</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>SF Transactions Error</name>
    <type>InsertUpdate</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <commit>100</commit>
    <update_bypassed>N</update_bypassed>
    <lookup>
      <schema>errors_loading</schema>
      <table>SF_Transactions</table>
      <key>
        <name>UHN_UID__c</name>
        <field>UHN_UID__c</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>UHN_Exchange_Rate_Date__c</name>
        <rename>UHN_Exchange_Rate_Date__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Effective_Date__c</name>
        <rename>UHN_Effective_Date__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Line_Date_Created__c</name>
        <rename>UHN_Line_Date_Created__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Line_Date_Posted__c</name>
        <rename>UHN_Line_Date_Posted__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>Name</name>
        <rename>Name</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Actual_Original__c</name>
        <rename>UHN_Actual_Original__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Amount__c</name>
        <rename>UHN_Amount__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Business_Area__c</name>
        <rename>UHN_Business_Area__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Calculated_Date_Key__c</name>
        <rename>UHN_Calculated_Date_Key__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Currency_Original__c</name>
        <rename>UHN_Currency_Original__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Currency__c</name>
        <rename>UHN_Currency__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Debit_or_Credit__c</name>
        <rename>UHN_Debit_or_Credit__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Description__c</name>
        <rename>UHN_Description__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Exchange_Rate__c</name>
        <rename>UHN_Exchange_Rate__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_FCC_SAP_Id__c</name>
        <rename>UHN_FCC_SAP_Id__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_FCC__c</name>
        <rename>UHN_FCC__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_FCC_original__c</name>
        <rename>UHN_FCC_original__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_GL_Account_SAP_Id__c</name>
        <rename>UHN_GL_Account_SAP_Id__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_GL_Account__c</name>
        <rename>UHN_GL_Account__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Journal_Description__c</name>
        <rename>UHN_Journal_Description__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Journal_Line_Status__c</name>
        <rename>UHN_Journal_Line_Status__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Journal_Sequence_Number__c</name>
        <rename>UHN_Journal_Sequence_Number__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Journal_Status_Code__c</name>
        <rename>UHN_Journal_Status_Code__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Journal_Type_Code__c</name>
        <rename>UHN_Journal_Type_Code__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Origin_Code__c</name>
        <rename>UHN_Origin_Code__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Origin_Description__c</name>
        <rename>UHN_Origin_Description__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_PI_Expense_or_Revenue_Category__c</name>
        <rename>UHN_PI_Expense_or_Revenue_Category__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_PI_Expense_or_Revenue_Class__c</name>
        <rename>UHN_PI_Expense_or_Revenue_Class__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_PI_Expense_or_Revenue_Type__c</name>
        <rename>UHN_PI_Expense_or_Revenue_Type__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Purchase_Order_Line__c</name>
        <rename>UHN_Purchase_Order_Line__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Purchase_Order_Number__c</name>
        <rename>UHN_Purchase_Order_Number__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Purchased_Quantity__c</name>
        <rename>UHN_Purchased_Quantity__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_SAP_JOURNAL_ID__c</name>
        <rename>UHN_SAP_JOURNAL_ID__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_SAP_Journal_Line__c</name>
        <rename>UHN_SAP_Journal_Line__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Source_Document_Reference__c</name>
        <rename>UHN_Source_Document_Reference__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Sponsor_SAP_Id__c</name>
        <rename>UHN_Sponsor_SAP_Id__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Sponsor__c</name>
        <rename>UHN_Sponsor__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Sponsored_Class_Detail__c</name>
        <rename>UHN_Sponsored_Class_Detail__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Sponsored_Class__c</name>
        <rename>UHN_Sponsored_Class__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_UID__c</name>
        <rename>UHN_UID__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Vendor_ID__c</name>
        <rename>UHN_Vendor_ID__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Vendor_Item_Description__c</name>
        <rename>UHN_Vendor_Item_Description__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Vendor_Item_ID__c</name>
        <rename>UHN_Vendor_Item_ID__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Vendor_Name_2__c</name>
        <rename>UHN_Vendor_Name_2__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Vendor_Name__c</name>
        <rename>UHN_Vendor_Name__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Transaction_Name_Rule__c</name>
        <rename>UHN_Transaction_Name_Rule__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UHN_Transfer_Direction__c</name>
        <rename>UHN_Transfer_Direction__c</rename>
        <update>Y</update>
      </value>
      <value>
        <name>UID_AlreadyInSF</name>
        <rename>UID_AlreadyInSF</rename>
        <update>Y</update>
      </value>
      <value>
        <name>NoOfErrors</name>
        <rename>NoOfErrors</rename>
        <update>Y</update>
      </value>
      <value>
        <name>ErrorDescription</name>
        <rename>ErrorDescription</rename>
        <update>Y</update>
      </value>
      <value>
        <name>ErrorDate</name>
        <rename>ErrorDate</rename>
        <update>Y</update>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1744</xloc>
      <yloc>896</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Select values</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>CURRENCY_RATE_DATE</name>
      </field>
      <field>
        <name>EFFECTIVE_DATE</name>
      </field>
      <field>
        <name>LINE_DATE_CREATED</name>
      </field>
      <field>
        <name>LINE_DATE_POSTED</name>
      </field>
      <field>
        <name>JE_Name_SF</name>
        <rename>Name</rename>
      </field>
      <field>
        <name>TRANSACTION_AMOUNT</name>
        <rename>UHN_Actual_Original__c</rename>
      </field>
      <field>
        <name>PRIMARY_AMOUNT</name>
        <rename>UHN_Amount__c</rename>
      </field>
      <field>
        <name>LINE_LEDGER_ENTITY_ID</name>
        <rename>UHN_Business_Area__c</rename>
      </field>
      <field>
        <name>ReportingDate</name>
        <rename>UHN_Calculated_Date_Key__c</rename>
      </field>
      <field>
        <name>TRANSACTION_CURRENCY_CODE</name>
        <rename>UHN_Currency_Original__c</rename>
      </field>
      <field>
        <name>PRIMARY_CURRENCY_CODE</name>
        <rename>UHN_Currency__c</rename>
      </field>
      <field>
        <name>DEBIT_CREDIT_CODE_1</name>
        <rename>UHN_Debit_or_Credit__c</rename>
      </field>
      <field>
        <name>DESCRIPTION</name>
        <rename>UHN_Description__c</rename>
      </field>
      <field>
        <name>TRANS_TO_PRIM_EXCHANGE_RATE</name>
        <rename>UHN_Exchange_Rate__c</rename>
      </field>
      <field>
        <name>TTH_CENTER</name>
        <rename>UHN_FCC_SAP_Id__c</rename>
      </field>
      <field>
        <name>FCC_SF</name>
        <rename>UHN_FCC__c</rename>
      </field>
      <field>
        <name>FCC_Original</name>
        <rename>UHN_FCC_original__c</rename>
      </field>
      <field>
        <name>TTH_ACCOUNT</name>
        <rename>UHN_GL_Account_SAP_Id__c</rename>
      </field>
      <field>
        <name>GL_Account_SF</name>
        <rename>UHN_GL_Account__c</rename>
      </field>
      <field>
        <name>JOURNAL_DESCRIPTION</name>
        <rename>UHN_Journal_Description__c</rename>
      </field>
      <field>
        <name>JOURNAL_LINE_STATUS</name>
        <rename>UHN_Journal_Line_Status__c</rename>
      </field>
      <field>
        <name>JOURNAL_SEQUENCE_NUMBER</name>
        <rename>UHN_Journal_Sequence_Number__c</rename>
      </field>
      <field>
        <name>JOURNAL_STATUS_CODE</name>
        <rename>UHN_Journal_Status_Code__c</rename>
      </field>
      <field>
        <name>JOURNAL_TYPE_CODE</name>
        <rename>UHN_Journal_Type_Code__c</rename>
      </field>
      <field>
        <name>LINE_JOURNAL_ORIGIN_CODE</name>
        <rename>UHN_Origin_Code__c</rename>
      </field>
      <field>
        <name>LINE_JOURNAL_ORIGIN_DESCR</name>
        <rename>UHN_Origin_Description__c</rename>
      </field>
      <field>
        <name>RFIS_Category</name>
        <rename>UHN_PI_Expense_or_Revenue_Category__c</rename>
      </field>
      <field>
        <name>RFIS_Class</name>
        <rename>UHN_PI_Expense_or_Revenue_Class__c</rename>
      </field>
      <field>
        <name>RFIS_Type</name>
        <rename>UHN_PI_Expense_or_Revenue_Type__c</rename>
      </field>
      <field>
        <name>PURCHASE_ORDER_LINE</name>
        <rename>UHN_Purchase_Order_Line__c</rename>
      </field>
      <field>
        <name>PURCHASE_ORDER_NUMBER</name>
        <rename>UHN_Purchase_Order_Number__c</rename>
      </field>
      <field>
        <name>PurchasedQuantity_POLINE</name>
        <rename>UHN_Purchased_Quantity__c</rename>
      </field>
      <field>
        <name>JOURNAL_ID</name>
        <rename>UHN_SAP_JOURNAL_ID__c</rename>
      </field>
      <field>
        <name>JOURNAL_LINE_NUMBER</name>
        <rename>UHN_SAP_Journal_Line__c</rename>
      </field>
      <field>
        <name>SOURCE_DOCUMENT_REFERENCE</name>
        <rename>UHN_Source_Document_Reference__c</rename>
      </field>
      <field>
        <name>Sponsor_ID_SAP</name>
        <rename>UHN_Sponsor_SAP_Id__c</rename>
      </field>
      <field>
        <name>Sponsor_ID_SF</name>
        <rename>UHN_Sponsor__c</rename>
      </field>
      <field>
        <name>SponsoredClass_Detail</name>
        <rename>UHN_Sponsored_Class_Detail__c</rename>
      </field>
      <field>
        <name>SponsoredClass</name>
        <rename>UHN_Sponsored_Class__c</rename>
      </field>
      <field>
        <name>UID</name>
        <rename>UHN_UID__c</rename>
      </field>
      <field>
        <name>VENDOR_ID</name>
        <rename>UHN_Vendor_ID__c</rename>
      </field>
      <field>
        <name>ShortDescription_POLINE</name>
        <rename>UHN_Vendor_Item_Description__c</rename>
      </field>
      <field>
        <name>Vendor_Item_ID_POLINE</name>
        <rename>UHN_Vendor_Item_ID__c</rename>
      </field>
      <field>
        <name>Vendor_Name_2</name>
        <rename>UHN_Vendor_Name_2__c</rename>
      </field>
      <field>
        <name>Vendor_Name</name>
        <rename>UHN_Vendor_Name__c</rename>
      </field>
      <field>
        <name>TransactionDescription_Rule</name>
        <rename>UHN_Transaction_Name_Rule__c</rename>
      </field>
      <field>
        <name>ExpenseTransferDirection</name>
        <rename>UHN_Transfer_Direction__c</rename>
      </field>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>CURRENCY_RATE_DATE</name>
        <rename>UHN_Exchange_Rate_Date__c</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>MM/dd/yyyy HH:mm:ss</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EFFECTIVE_DATE</name>
        <rename>UHN_Effective_Date__c</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>MM/dd/yyyy HH:mm:ss</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>LINE_DATE_POSTED</name>
        <rename>UHN_Line_Date_Posted__c</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>MM/dd/yyyy HH:mm:ss</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>LINE_DATE_CREATED</name>
        <rename>UHN_Line_Date_Created__c</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>MM/dd/yyyy HH:mm:ss</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4800</xloc>
      <yloc>768</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Select values 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>CURRENCY_RATE_DATE</name>
      </field>
      <field>
        <name>EFFECTIVE_DATE</name>
      </field>
      <select_unspecified>Y</select_unspecified>
      <meta>
        <name>CURRENCY_RATE_DATE</name>
        <rename>CURRENCY_RATE_DATE</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>MM/dd/yyyy</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
      <meta>
        <name>EFFECTIVE_DATE</name>
        <rename>EFFECTIVE_DATE</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>MM/dd/yyyy</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale/>
        <date_format_timezone/>
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>5152</xloc>
      <yloc>512</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Select values 3</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>UHN_UID__c</name>
        <rename>UID_Transaction</rename>
      </field>
      <field>
        <name>PnL_Category</name>
      </field>
      <field>
        <name>PnL_ListOfRules</name>
      </field>
      <field>
        <name>PnL_NumberOfRules</name>
      </field>
      <field>
        <name>PnL_SAP_ID_Entity</name>
      </field>
      <field>
        <name>UHN_Amount__c</name>
      </field>
      <field>
        <name>UHN_FCC_SAP_Id__c</name>
      </field>
      <select_unspecified>N</select_unspecified>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2368</xloc>
      <yloc>1136</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Select values 4</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>Level_4_Description</name>
        <rename>FCC_Level_4_Description</rename>
      </field>
      <field>
        <name>Level_5_Description</name>
        <rename>FCC_Level_5_Description</rename>
      </field>
      <field>
        <name>UHN_GL_Account_SAP_Id__c</name>
        <rename>GL_Account</rename>
      </field>
      <field>
        <name>PnL_SAP_ID_Entity</name>
      </field>
      <select_unspecified>Y</select_unspecified>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3472</xloc>
      <yloc>1040</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Set JE Name 3</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>50</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>
      <jsScript>
        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>//Just setting to null

var TempName = null;
var Vendor_ID__NoLeadingZeros = '';
var LengthOfTransactionName = null;
var JE_Name_SF = null;
var TransactionDescriptionLength = null;
var Vendor_Name_Length = null;
var TransactionDescription_Rule = null;




//Setting to blank (not null) so it can be concatenated, length can be measured etc.
var ListOfRules = '';

var Non_CAD_Currency_String = '';
var Non_CAD_Currency_String_Length = 0;




//Replace multiple blanks with one via Regular Expressions
switch (true) {
	case LINE_JOURNAL_ORIGIN_DESCR != '':
		LINE_JOURNAL_ORIGIN_DESCR = LINE_JOURNAL_ORIGIN_DESCR.replace(/  +/g, ' ');
		break;	

	case JOURNAL_DESCRIPTION != '':
		JOURNAL_DESCRIPTION = JOURNAL_DESCRIPTION.replace(/  +/g, ' ');
		break;

	case DESCRIPTION != '':
		DESCRIPTION = DESCRIPTION.replace(/  +/g, ' ');
		break;

	case Vendor_Name != '':
		Vendor_Name = Vendor_Name.replace(/  +/g, ' ');
		break;

	case ShortDescription_POLINE != '':
		ShortDescription_POLINE = ShortDescription_POLINE.replace(/  +/g, ' ');
		break;

}



//Set Non_CAD_Currency_String

//if (TRANSACTION_CURRENCY_CODE != PRIMARY_CURRENCY_CODE || TRANSACTION_CURRENCY_CODE != 'CAD') {

	Non_CAD_Currency_String = num2str(TRANSACTION_AMOUNT, "#,##0.00");

	switch (true) {

		case TRANSACTION_CURRENCY_CODE == 'CAD':
			Non_CAD_Currency_String = '';
			Non_CAD_Currency_String_Length =  0
			break;

		case TRANSACTION_CURRENCY_CODE == 'USD':
			Non_CAD_Currency_String = ' ($'.concat(Non_CAD_Currency_String).concat(' ').concat(TRANSACTION_CURRENCY_CODE).concat(')');
			Non_CAD_Currency_String_Length = Non_CAD_Currency_String.length;
			break;

		case TRANSACTION_CURRENCY_CODE == 'EUR':
			//The EUR sign looks weird here, but it shows properly in the Business Hub
			Non_CAD_Currency_String = ' (‚Ç¨'.concat(Non_CAD_Currency_String).concat(' ').concat(TRANSACTION_CURRENCY_CODE).concat(')');
			Non_CAD_Currency_String_Length = Non_CAD_Currency_String.length;
			break;

		case TRANSACTION_CURRENCY_CODE == 'GBP':
			Non_CAD_Currency_String = ' (¬£'.concat(Non_CAD_Currency_String).concat(' ').concat(TRANSACTION_CURRENCY_CODE).concat(')');
			Non_CAD_Currency_String_Length = Non_CAD_Currency_String.length;
			break;
			
		default:
			Non_CAD_Currency_String = ' ('.concat(Non_CAD_Currency_String).concat(' ').concat(TRANSACTION_CURRENCY_CODE).concat(')');
			Non_CAD_Currency_String_Length = Non_CAD_Currency_String.length;
			break;


}



Non_CAD_Currency_String_Length = Non_CAD_Currency_String.length	



//Set TransactionDescriptionLength
if (LINE_JOURNAL_ORIGIN_DESCR != '') {
	TransactionDescriptionLength = LINE_JOURNAL_ORIGIN_DESCR.length;
	} else {
	TransactionDescriptionLength = 0;
	}

//Set Vendor_Name_Length
if (Vendor_Name != '') {
		Vendor_Name_Length = Vendor_Name.length;
		} else {
		Vendor_Name_Length = 0;
		}





//New Transaction Names rules, rewritten from CASE switch (true) to if-then-else if






////////////////////////////////////////////REWRITING////////////////////////////////////////////

//Rules to determine transaction names

//RE
//Rule 100 - UHN_ORIGIN_CODE__C = RE
if (LINE_JOURNAL_ORIGIN_CODE == 'RE' &amp;&amp; Vendor_Name != ''  &amp;&amp; ShortDescription_POLINE != '' )
		{
			JE_Name_SF = Vendor_Name.concat(": ").concat(ShortDescription_POLINE).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '100 (RE; Vendor Name not blank, Vendor Item Description not blank)';
		}


//Rule 101 - UHN_ORIGIN_CODE__C = RE, ShortDescription_POLINE not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'RE' &amp;&amp; Vendor_Name == ''   &amp;&amp; ShortDescription_POLINE != '')
		{
			JE_Name_SF =  ShortDescription_POLINE.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '101 (RE; Vendor Name blank, Vendor Item Description not blank)';
		}

//Rule 102 - UHN_ORIGIN_CODE__C = RE, Vendor Name not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'RE' &amp;&amp; Vendor_Name != '' &amp;&amp; ShortDescription_POLINE == '')
		{
			JE_Name_SF = Vendor_Name.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '102 (RE; Vendor Name not blank, Vendor Item Description blank)';
		}


//RN
//Rule 110 - UHN_ORIGIN_CODE__C = RN
else if (LINE_JOURNAL_ORIGIN_CODE == 'RN' &amp;&amp; Vendor_Name != '' &amp;&amp; ShortDescription_POLINE != '')
		{
			JE_Name_SF = Vendor_Name.concat(ShortDescription_POLINE).concat(" ").concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '110 (RN, Vendor Name not blank, Item Description not blank)';
		}

//KR
//Rule 120 = UHN_ORIGIN_CODE__C = 'KR', Description != '', BMO, Cardinal Health, Grand &amp; Toy
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; (VENDOR_ID == '0001001957' || VENDOR_ID == '0005000435' || VENDOR_ID == '0001000220') &amp;&amp; DESCRIPTION.length > 18 &amp;&amp; Vendor_Name != '' &amp;&amp;  DESCRIPTION.indexOf(Vendor_ID__NoLeadingZeros) == 0)
		{
					JE_Name_SF = Vendor_Name.concat(': ').concat(replace((substr(DESCRIPTION, 17)),'\"','')).concat(Non_CAD_Currency_String);
					TransactionDescription_Rule = '120 (KR; BMO, Cardinal Health, Grand &amp; Toy; Description > 18, Vendor Name not blank;)';
		}


//Rule 121-10 = UHN_ORIGIN_CODE__C = 'KR', Description != '', BMO, Cardinal Health, Grand &amp; Toy
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; (VENDOR_ID == '0001001957' || VENDOR_ID == '0005000435' || VENDOR_ID == '0001000220')  &amp;&amp; Vendor_Name != ''  &amp;&amp; ShortDescription_POLINE != '' &amp;&amp; DESCRIPTION.length > 18 &amp;&amp;  DESCRIPTION.indexOf(Vendor_ID__NoLeadingZeros) == 0)
		{
			JE_Name_SF = Vendor_Name.concat(": ").concat(ShortDescription_POLINE).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '121-10 (KR; BMO, Cardinal Health, Grand &amp; Toy, Description > 18 and Description starts with Vendor ID, Vendor name not blank, Item Description not blank)';
		}

//Rule 122-10 = UHN_ORIGIN_CODE__C = 'KR', BMO, Cardinal Health, Grand &amp; Toy
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; (VENDOR_ID == '0001001957' || VENDOR_ID == '0005000435' || VENDOR_ID == '0001000220')  &amp;&amp; Vendor_Name != '' &amp;&amp; SponsoredClass_Detail != '')
		{
			JE_Name_SF = Vendor_Name.concat(": ").concat(SponsoredClass_Detail).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '122-10 (KR; BMO, Cardinal Health, Grand &amp; Toy, Vendor name not blank, Item Description blank, Sponsored Class Detail not blank)';

TempName = 'OriginCode: '.concat(LINE_JOURNAL_ORIGIN_CODE).concat(' Vendor_ID__NoLeadingZeros: ').concat(Vendor_ID__NoLeadingZeros).concat(' DescriptionIndex: ').concat(num2str(DESCRIPTION.indexOf(Vendor_ID__NoLeadingZeros)))
		}
		

//Rule 123-2 Generic vendors
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; Vendor_Name != ''  &amp;&amp; DESCRIPTION == '' &amp;&amp; JOURNAL_DESCRIPTION == '' &amp;&amp; LINE_JOURNAL_ORIGIN_DESCR != '' &amp;&amp; SOURCE_DOCUMENT_REFERENCE != '')
		{
			JE_Name_SF = Vendor_Name.concat(": ").concat(LINE_JOURNAL_ORIGIN_DESCR).concat(" ").concat(SOURCE_DOCUMENT_REFERENCE).concat(Non_CAD_Currency_String)
			TransactionDescription_Rule = '123-2 (KR; Vendor Name, Origin Description, Source Document Reference)';
		}

//Rule 123-1 Generic vendors
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; Vendor_Name == ''  &amp;&amp; DESCRIPTION == '' &amp;&amp; JOURNAL_DESCRIPTION == '' &amp;&amp; LINE_JOURNAL_ORIGIN_DESCR != '' &amp;&amp; SOURCE_DOCUMENT_REFERENCE != '')
		{
			JE_Name_SF = LINE_JOURNAL_ORIGIN_DESCR.concat(" (Ref. ").concat(SOURCE_DOCUMENT_REFERENCE).concat(")").concat(Non_CAD_Currency_String)
			TransactionDescription_Rule = '123-1 (KR; Most fields blank, using LINE_JOURNAL_ORIGIN_DESCR and SOURCE_DOCUMENT_REFERENCE)';
		}

//Rule 123 Generic vendors
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; Vendor_Name_Length >= 1 &amp;&amp; TransactionDescriptionLength &lt; 20  &amp;&amp;  (RFIS_Type == 'Supplies and Other' || RFIS_Type == 'Equipment'))
		{
			JE_Name_SF = Vendor_Name.concat(": ").concat(substr(DESCRIPTION,DESCRIPTION.indexOf(" ") +1 )).concat(Non_CAD_Currency_String)
			TransactionDescription_Rule = '123 (KR; Supplies and Other, Equipment)';
		}

//Rule 124
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; (DESCRIPTION.indexOf(Vendor_ID__NoLeadingZeros) == 0) &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(substr(DESCRIPTION, DESCRIPTION.indexOf(' ') + 1)).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '124 (KR; VendorID in Description, Vendor Name not blank)';
		}

//Rule 125
else if (LINE_JOURNAL_ORIGIN_CODE == 'KR' &amp;&amp; JOURNAL_DESCRIPTION != '')
		{
			JE_Name_SF = JOURNAL_DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '125 (KR; Journal Description not blank)';
		}


//SA
//Rule 130 = UHN_ORIGIN_CODE__C = 'SA'
else if (LINE_JOURNAL_ORIGIN_CODE == 'SA' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '130 (SA; Description not blank)';
		}

//Rule 131 = UHN_ORIGIN_CODE__C = 'SA'
else if (LINE_JOURNAL_ORIGIN_CODE == 'SA' &amp;&amp; JOURNAL_DESCRIPTION != '')
		{
			JE_Name_SF = JOURNAL_DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '131 (SA; Description blank, Journal Description not blank)';
		}


//KA	
//Rule 140 = UHN_ORIGIN_CODE__C = 'KA'
else if (LINE_JOURNAL_ORIGIN_CODE == 'KA' &amp;&amp; DESCRIPTION != '' &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(DESCRIPTION).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '140 (KA; Vendor Name not blank, Description not blank)';
		}

//Rule 141 = UHN_ORIGIN_CODE__C = 'KA'
else if (LINE_JOURNAL_ORIGIN_CODE == 'KA' &amp;&amp; DESCRIPTION != '' &amp;&amp; Vendor_Name == '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '141 (KA; Vendor Name blank, Description not blank)';
		}

//Rule 142 = UHN_ORIGIN_CODE__C = 'KA'
else if (LINE_JOURNAL_ORIGIN_CODE == 'KA' &amp;&amp; DESCRIPTION == '' &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = Vendor_Name.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '142 (KA; Vendor Name not blank, Description blank)';
		}


//KG
//Rule 150 = UHN_ORIGIN_CODE__C = 'KG', Vendor Name not blank, DESCRIPTION not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'KG' &amp;&amp; Vendor_Name != '' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(DESCRIPTION).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '150 (KG; Vendor Name not blank, Description not blank)';
		}

//Rule 151 = UHN_ORIGIN_CODE__C = 'KG', DESCRIPTION not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'KG' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '151 (KG; Vendor Name blank, Description not blank)';
		}

//Rule 152 = UHN_ORIGIN_CODE__C = 'KG', DESCRIPTION blank, Vendor Name not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'KG' &amp;&amp; DESCRIPTION == '' &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = Vendor_Name.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '152 (KG; Vendor Name not blank, Description blank)';
		}

//KP
//Rule 160 = UHN_ORIGIN_CODE__C = 'KP', Vendor Name not blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'KP' &amp;&amp; Vendor_Name != '' &amp;&amp; ShortDescription_POLINE != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(ShortDescription_POLINE).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '160 (KP; Vendor Name not blank, Vendor Item Description not blank)';
		}

//Rule 161 = UHN_ORIGIN_CODE__C = 'KP', Vendor Name blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'KP' &amp;&amp; Vendor_Name == '' &amp;&amp; ShortDescription_POLINE != '')
		{
			JE_Name_SF = ShortDescription_POLINE.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '161 (KP; Vendor Name blank, Vendor Item Description not blank)';
		}

//Rule 162 = UHN_ORIGIN_CODE__C = 'KP', Vendor Name not blank, Vendor Item Description blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'KP' &amp;&amp; Vendor_Name != '' &amp;&amp; ShortDescription_POLINE == '')
		{
			JE_Name_SF = Vendor_Name.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '162 (KP; Vendor Name not blank, Vendor Item Description blank)';
		}


//Rule 170 = UHN_ORIGIN_CODE__C = 'WA', SponsoredClass_Detail not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'WA' &amp;&amp; SponsoredClass_Detail != '')
		{
			JE_Name_SF = SponsoredClass_Detail.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '170 (WA, SponsoredClass_Detail not blank)';
		}

//WE
//Rule 180 = UHN_ORIGIN_CODE__C = 'WE',  Vendor Name not blank, Vendor Item Description not blank
//else if (LINE_JOURNAL_ORIGIN_CODE == 'WE' &amp;&amp; ShortDescription_POLINE != '' &amp;&amp; SOURCE_DOCUMENT_REFERENCE != '')
//		{
//			JE_Name_SF = Vendor_Name.concat(': ').concat(ShortDescription_POLINE).concat(Non_CAD_Currency_String);
//			TransactionDescription_Rule = '180 (WE; Vendor Name not blank, Vendor Item Description not blank)';
//		}



//Rule 180 = UHN_ORIGIN_CODE__C = 'WE',  Vendor Name not blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'WE' &amp;&amp; ShortDescription_POLINE != '' &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(ShortDescription_POLINE).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '180 (WE; Vendor Name not blank, Vendor Item Description not blank)';
		}



//Rule 182 = UHN_ORIGIN_CODE__C = 'WE', Vendor Name blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'WE' &amp;&amp; Vendor_Name == '' &amp;&amp; ShortDescription_POLINE != '')
		{
			JE_Name_SF = ShortDescription_POLINE.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '182 (WE; Vendor Name blank, Vendor Item Description not blank)';
		}


//Rule 184 = UHN_ORIGIN_CODE__C = 'WE',  Vendor Name not blank, Vendor Item Description blank,
//else if (LINE_JOURNAL_ORIGIN_CODE == 'WE' &amp;&amp; ShortDescription_POLINE == '' &amp;&amp; SOURCE_DOCUMENT_REFERENCE != '') was wrong
else if (LINE_JOURNAL_ORIGIN_CODE == 'WE' &amp;&amp; Vendor_Name !='' &amp;&amp;  ShortDescription_POLINE == '' )
		{
			JE_Name_SF = Vendor_Name.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '184 (WE; Vendor Name not blank, Vendor Item Description blank)'
		}

//WL
//Rule 190 = UHN_ORIGIN_CODE__C = 'WL', Vendor Name not blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'WL' &amp;&amp; ShortDescription_POLINE != '' &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(ShortDescription_POLINE).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '190 (WL; Vendor Name not blank, Vendor Item Description not blank)';
		}


//Rule 192 = UHN_ORIGIN_CODE__C = 'WL', Vendor name blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'WL' &amp;&amp; Vendor_Name == '' &amp;&amp; ShortDescription_POLINE != '')
		{
			JE_Name_SF = ShortDescription_POLINE.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '192 (WL; Vendor Name blank, Vendor Item Description not blank)';
		}

//Rule 194 = UHN_ORIGIN_CODE__C = 'WL', Vendor Name not blank, Vendor Item Description blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'WL' &amp;&amp; Vendor_Name != '' &amp;&amp; ShortDescription_POLINE == '')
		{
			JE_Name_SF = Vendor_Name.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '192 (WL; Vendor Name not blank, Vendor Item Description blank)';
		}

//ZB

//Rule 204 = UHN_ORIGIN_CODE__C = 'ZB', Vendor Name not blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'ZB' &amp;&amp; ShortDescription_POLINE != '' &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(ShortDescription_POLINE).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '204 (ZB; Vendor Name not blank, Vendor Item Description not blank)';
		}

//Rule 205 = UHN_ORIGIN_CODE__C = 'ZB', Vendor Name blank, Vendor Item Description not blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'ZB' &amp;&amp; Vendor_Name == '' &amp;&amp; ShortDescription_POLINE != '')
		{
			JE_Name_SF = ShortDescription_POLINE.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '205 (ZB; Vendor Name blank, Vendor Item Description not blank)';
		}


//Rule 206 = UHN_ORIGIN_CODE__C = 'ZB', Vendor Name not blank, Vendor Item Description blank
else if (LINE_JOURNAL_ORIGIN_CODE == 'ZB' &amp;&amp; Vendor_Name != '' &amp;&amp; ShortDescription_POLINE == '')
		{
			JE_Name_SF = Vendor_Name.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '206 (ZB; Vendor Name not blank, Vendor Item Description blank)';
		}


//ZI

//Rule 210 = UHN_ORIGIN_CODE__C = 'ZI'

else if (LINE_JOURNAL_ORIGIN_CODE == 'ZI' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '210 (ZI; Description not blank)';
		}


//DR

//Rule 220 = UHN_ORIGIN_CODE__C = 'DR'
else if (LINE_JOURNAL_ORIGIN_CODE == 'DR' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '220 (DR; Description not blank)';

		}


//DZ 

//Rule 230 = UHN_ORIGIN_CODE__C = 'DZ'

else if (LINE_JOURNAL_ORIGIN_CODE == 'DZ' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '230 (DZ; Description not blank)';
		}



//ZO

//Rule 240 = UHN_ORIGIN_CODE__C = 'ZO', Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'ZO' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '240 (ZO; Description not blank)';
		}


//AF

//Rule 250 = UHN_ORIGIN_CODE__C = 'AF', Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'AF' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '250 (AF; Description not blank)';
		}

//AB

//Rule 260 = UHN_ORIGIN_CODE__C = 'AB', Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'AB' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '260 (AB; Description not blank)';
		}



//DG

//Rule 270 = UHN_ORIGIN_CODE__C = 'DG', Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'DG' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '270 (DG; Description not blank)';
		}

//PR

//Rule 280 = UHN_ORIGIN_CODE__C = 'PR', Vendor Name not null, Journal Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'PR' &amp;&amp; Vendor_Name != '' &amp;&amp; JOURNAL_DESCRIPTION != '')
		{
			JE_Name_SF = Vendor_Name.concat(': ').concat(JOURNAL_DESCRIPTION).concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '280 (PR; Vendor Name not blank, Journal Description not blank)';
		}

//Rule 281 = UHN_ORIGIN_CODE__C = 'PR', Vendor Name null, Journal Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'PR' &amp;&amp; JOURNAL_DESCRIPTION != '' &amp;&amp; Vendor_Name != '')
		{
			JE_Name_SF = JOURNAL_DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '281 (PR; Vendor Name blank, Journal Description not blank)';
		}


//GL

//Rule 285 = UHN_ORIGIN_CODE__C = 'GL', Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'GL' &amp;&amp; DESCRIPTION)
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '285 (GL;  Description not blank)';
		}

//Rule 286 = UHN_ORIGIN_CODE__C = 'GL', Journal Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'GL' &amp;&amp; JOURNAL_DESCRIPTION)
		{
			JE_Name_SF = JOURNAL_DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '286 (GL;  Journal Description not blank)';
		}


//UL
//Rule 290 = UHN_ORIGIN_CODE__C = 'UL', Description not null
else if (LINE_JOURNAL_ORIGIN_CODE == 'UL' &amp;&amp; DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '290 (UL; Description not blank)';
		}


// Last Ressort rules, trying to pull in something that's at least remotely useful
//Rule 900 = Description not null and not blank
else if (DESCRIPTION != '')
		{
			JE_Name_SF = DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '900 (Description not blank)';
		}


//Rule 910 = Journal Description not null and not blank
else if (JOURNAL_DESCRIPTION != '')
		{
			JE_Name_SF = JOURNAL_DESCRIPTION.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '910 (JournalDescription not blank)';
		}


//Rule 920  LINE_JOURNAL_ORIGIN_DESCR not null and not blank
else if (LINE_JOURNAL_ORIGIN_DESCR != '')
		{
			JE_Name_SF = LINE_JOURNAL_ORIGIN_DESCR.concat(Non_CAD_Currency_String);
			TransactionDescription_Rule = '920 (LINE_JOURNAL_ORIGIN_DESCR not blank)';
		}


else 	{
			JE_Name_SF = '***Transaction Name undefined - Inform Gert.Wieland@uhn.ca***';	
			TransactionDescription_Rule = '999; Transaction not covered by any rule';
		}



//Check if something was purchased from RIS
switch (true) {
	case JOURNAL_DESCRIPTION != '':
		if (upper(JOURNAL_DESCRIPTION).indexOf('RISM') >= 0 || upper(JOURNAL_DESCRIPTION).indexOf('RISCST') >= 0  || upper(JOURNAL_DESCRIPTION).indexOf(' RIS ') >= 0) {
			JE_Name_SF = "RIS: ".concat(JE_Name_SF);
			TransactionDescription_Rule = '930 (RIS: '.concat(TransactionDescription_Rule).concat(')')
			break
		}
}


//Max length for NAME field in SF is 80
if (JE_Name_SF === null || JE_Name_SF == '')
		{JE_Name_SF = '***Missing*** Inform Gert.Wieland@uhn.ca' }



if (JE_Name_SF.length > 80) {
	JE_Name_SF = substr(JE_Name_SF,0,80);
	}

JE_Name_SF = JE_Name_SF.replace(/  +/g, ' ');


//Add GRIR at the end of JE_NAME_SF if contained in JOURNAL_DESCRIPTION. Make sure it's not getting longer than 80 characters

if (JOURNAL_DESCRIPTION != '' &amp;&amp; LINE_JOURNAL_ORIGIN_CODE == 'KP') {
	switch (true) {
		case upper(JOURNAL_DESCRIPTION).indexOf('GRIR') >= 0 &amp;&amp; JE_Name_SF.length &lt;= 73:
			JE_Name_SF = JE_Name_SF.concat(' (GRIR)')
			TransactionDescription_Rule = '940 (GRIR: '.concat(TransactionDescription_Rule).concat(')')
			break;

		case upper(JOURNAL_DESCRIPTION).indexOf('GRIR') >= 0 &amp;&amp; JE_Name_SF.length > 73:
			JE_Name_SF = substr(JE_Name_SF,73).concat(' (GRIR)')
			TransactionDescription_Rule = '941 (GRIR: '.concat(TransactionDescription_Rule).concat(')')
			break;
	}
}



//Remove quotes if they are the first AND last character

JE_Name_SF = trim(JE_Name_SF)


if (JE_Name_SF === null ||  JE_Name_SF == '')
	{ JE_Name_SF = '***Missing 2***'}
	



var FirstCharacter = substr(JE_Name_SF, 0,1)
var LastCharacter = substr(JE_Name_SF, JE_Name_SF.length -1)
var JE_NAME_SF_LENGTH = JE_Name_SF.length


if (FirstCharacter == '\"' &amp;&amp; LastCharacter == '\"') {
	JE_Name_SF = substr(JE_Name_SF, 1, JE_Name_SF.length-2)
}


//Make sure non-CAD amount does not get cut off when transaction name is longer than 80 characters

if (JE_Name_SF.length >= 80) {
	JE_Name_SF = substr(JE_Name_SF, 0, 80 - Non_CAD_Currency_String.length).concat(Non_CAD_Currency_String)
}

LengthOfTransactionName = JE_Name_SF.length;




</jsScript_script>
      </jsScript>
      <jsScript>
        <jsScript_type>-1</jsScript_type>
        <jsScript_name>substr_Sample</jsScript_name>
        <jsScript_script>// Perform the substring function
// 
// Usage:
// substr(var, from);
// substr(var, from, to);
//
// 2007-01-25
//
var str1= "Hello Pentaho!";
var str2= substr(str1, 6);
var str3= substr(str1, 6, 7);
Alert("Input : " + str1);
Alert("From position 6: " + str2);
Alert("From position 6 for 7 long : " + str3);
</jsScript_script>
      </jsScript>
    </jsScripts>
    <fields>
      <field>
        <name>JE_Name_SF</name>
        <rename>JE_Name_SF</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TransactionDescription_Rule</name>
        <rename>TransactionDescription_Rule</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>LengthOfTransactionName</name>
        <rename>LengthOfTransactionName</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>Non_CAD_Currency_String</name>
        <rename>Non_CAD_Currency_String</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>Non_CAD_Currency_String_Length</name>
        <rename>Non_CAD_Currency_String_Length</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>JE_NAME_SF_LENGTH</name>
        <rename>JE_NAME_SF_LENGTH</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
      <field>
        <name>TempName</name>
        <rename>TempName</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4512</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Stream lookup</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <from>Institutes</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>PnL_SAP_ID_Entity</name>
        <field>Institute_ID_SAP</field>
      </key>
      <value>
        <name>Institute_ID_SAP</name>
        <rename>IsInstitute</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>2208</xloc>
      <yloc>1136</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>String operations</name>
    <type>StringOperations</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>JOURNAL_DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper>lower</lower_upper>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap>Y</init_cap>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
      <field>
        <in_stream_name>DESCRIPTION</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper>lower</lower_upper>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap>Y</init_cap>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
      <field>
        <in_stream_name>Vendor_Name</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper>lower</lower_upper>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap>Y</init_cap>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
      <field>
        <in_stream_name>ShortDescription_POLINE</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper>lower</lower_upper>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap>Y</init_cap>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3840</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Transaction Upsert</name>
    <type>SalesforceUpsert</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <targeturl>${GW_Salesforce_Webservice_URL}</targeturl>
    <username>${GW_Salesforce_UserName}</username>
    <password>${GW_Salesforce_Password}</password>
    <timeout>60000</timeout>
    <useCompression>Y</useCompression>
    <module>UHN_Journal_Entry__c</module>
    <upsertfield>UHN_UID__c</upsertfield>
    <batchSize>200</batchSize>
    <salesforceIDFieldName>UHN_UID__c</salesforceIDFieldName>
    <fields>
      <field>
        <name>Name</name>
        <field>Name</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Amount__c</name>
        <field>UHN_Amount__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Business_Area__c</name>
        <field>UHN_Business_Area__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Calculated_Date_Key__c</name>
        <field>UHN_Calculated_Date_Key__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Currency__c</name>
        <field>UHN_Currency__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Debit_or_Credit__c</name>
        <field>UHN_Debit_or_Credit__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Description__c</name>
        <field>UHN_Description__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Effective_Date__c</name>
        <field>UHN_Effective_Date__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Exchange_Rate_Date__c</name>
        <field>UHN_Exchange_Rate_Date__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_FCC_SAP_Id__c</name>
        <field>UHN_FCC_SAP_Id__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_FCC__c</name>
        <field>UHN_FCC__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_FCC_original__c</name>
        <field>UHN_FCC_original__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_GL_Account_SAP_Id__c</name>
        <field>UHN_GL_Account_SAP_Id__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_GL_Account__c</name>
        <field>UHN_GL_Account__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Journal_Description__c</name>
        <field>UHN_Journal_Description__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Journal_Line_Status__c</name>
        <field>UHN_Journal_Line_Status__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Journal_Sequence_Number__c</name>
        <field>UHN_Journal_Sequence_Number__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Journal_Status_Code__c</name>
        <field>UHN_Journal_Status_Code__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Journal_Type_Code__c</name>
        <field>UHN_Journal_Type_Code__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Line_Date_Created__c</name>
        <field>UHN_Line_Date_Created__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Line_Date_Posted__c</name>
        <field>UHN_Line_Date_Posted__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Origin_Code__c</name>
        <field>UHN_Origin_Code__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Origin_Description__c</name>
        <field>UHN_Origin_Description__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_PI_Expense_or_Revenue_Category__c</name>
        <field>UHN_PI_Expense_or_Revenue_Category__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_PI_Expense_or_Revenue_Class__c</name>
        <field>UHN_PI_Expense_or_Revenue_Class__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_PI_Expense_or_Revenue_Type__c</name>
        <field>UHN_PI_Expense_or_Revenue_Type__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Purchase_Order_Line__c</name>
        <field>UHN_Purchase_Order_Line__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Purchase_Order_Number__c</name>
        <field>UHN_Purchase_Order_Number__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Purchased_Quantity__c</name>
        <field>UHN_Purchased_Quantity__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_SAP_JOURNAL_ID__c</name>
        <field>UHN_SAP_JOURNAL_ID__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_SAP_Journal_Line__c</name>
        <field>UHN_SAP_Journal_Line__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Source_Document_Reference__c</name>
        <field>UHN_Source_Document_Reference__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Sponsor_SAP_Id__c</name>
        <field>UHN_Sponsor_SAP_Id__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Sponsor__c</name>
        <field>UHN_Sponsor__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Sponsored_Class_Detail__c</name>
        <field>UHN_Sponsored_Class_Detail__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Sponsored_Class__c</name>
        <field>UHN_Sponsored_Class__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Trans_To_Prim_Exchange_Rate__c</name>
        <field>UHN_Exchange_Rate__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Transaction_Amount__c</name>
        <field>UHN_Actual_Original__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Transaction_Currency_Code__c</name>
        <field>UHN_Currency_Original__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_UID__c</name>
        <field>UHN_UID__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Vendor_ID__c</name>
        <field>UHN_Vendor_ID__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Vendor_Item_Description__c</name>
        <field>UHN_Vendor_Item_Description__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Vendor_Item_ID__c</name>
        <field>UHN_Vendor_Item_ID__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Vendor_Name_2__c</name>
        <field>UHN_Vendor_Name_2__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Vendor_Name__c</name>
        <field>UHN_Vendor_Name__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Transaction_Name_Rule__c</name>
        <field>UHN_Transaction_Name_Rule__c</field>
        <useExternalId>N</useExternalId>
      </field>
      <field>
        <name>UHN_Transfer_Direction__c</name>
        <field>UHN_Transfer_Direction__c</field>
        <useExternalId>N</useExternalId>
      </field>
    </fields>
    <rollbackAllChangesOnError>N</rollbackAllChangesOnError>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1744</xloc>
      <yloc>656</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Trim</name>
    <type>StringOperations</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>TTH_ACCOUNT</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper/>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap/>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
      <field>
        <in_stream_name>TTH_CENTER</in_stream_name>
        <out_stream_name/>
        <trim_type>both</trim_type>
        <lower_upper/>
        <padding_type/>
        <pad_char/>
        <pad_len/>
        <init_cap/>
        <mask_xml/>
        <digits/>
        <remove_special_characters/>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1664</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>UID</name>
    <type>CheckSum</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <checksumtype>SHA-256</checksumtype>
    <resultfieldName>UID</resultfieldName>
    <resultType>hexadecimal</resultType>
    <compatibilityMode>N</compatibilityMode>
    <oldChecksumBehaviour>Y</oldChecksumBehaviour>
    <fieldSeparatorString>-</fieldSeparatorString>
    <checksumtype>SHA-256</checksumtype>
    <resultfieldName>UID</resultfieldName>
    <resultType>hexadecimal</resultType>
    <compatibilityMode>N</compatibilityMode>
    <oldChecksumBehaviour>Y</oldChecksumBehaviour>
    <fieldSeparatorString>-</fieldSeparatorString>
    <fields>
      <field>
        <name>JOURNAL_ID</name>
      </field>
      <field>
        <name>JOURNAL_LINE_NUMBER</name>
      </field>
      <field>
        <name>JOURNAL_SEQUENCE_NUMBER</name>
      </field>
      <field>
        <name>TTH_CENTER</name>
      </field>
      <field>
        <name>TTH_ACCOUNT</name>
      </field>
      <field>
        <name>LINE_DATE_POSTED</name>
      </field>
      <field>
        <name>DEBIT_CREDIT_CODE_1</name>
      </field>
      <field>
        <name>JOURNAL_STATUS_CODE</name>
      </field>
      <field>
        <name>JOURNAL_LINE_STATUS</name>
      </field>
      <field>
        <name>JOURNAL_TYPE_CODE</name>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3936</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>UID 3</name>
    <type>CheckSum</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <checksumtype>SHA-1</checksumtype>
    <resultfieldName>UID</resultfieldName>
    <resultType>hexadecimal</resultType>
    <compatibilityMode>N</compatibilityMode>
    <oldChecksumBehaviour>N</oldChecksumBehaviour>
    <fields>
      <field>
        <name>UID_Transaction</name>
      </field>
      <field>
        <name>PnL_SAP_ID_Entity</name>
      </field>
    </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>1920</xloc>
      <yloc>1168</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>Vendor Lookup</name>
    <type>DBLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <cache>Y</cache>
    <cache_load_all>Y</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema>edw</schema>
      <table>EDW_VENDOR</table>
      <orderby/>
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>VENDOR_ID</name>
        <field>VENDOR_ID</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>ORGANIZATION_OPERATING_NAME</name>
        <rename>Vendor_Name</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>ORGANIZATION_NAME</name>
        <rename>Vendor_Name_2</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>Vendor_ID__NoLeadingZeros</name>
        <rename>Vendor_ID__NoLeadingZeros</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>3200</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>edw.EDW_POSTED_JOURNAL_COMBINED</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>MSSQL_RFSDW</connection>
    <sql>SELECT *
FROM edw.EDW_POSTED_JOURNAL_COMBINED

WHERE


--TRANSACTION_CURRENCY_CODE &lt;&gt; PRIMARY_CURRENCY_CODE
--AND

(

--LastUpdate >=  DATEADD(DAY, -95, GETDATE())


LINE_DATE_POSTED between  '2022-12-01' and '2022-12-31'

--and TTH_CENTER = '739208110' 
--and LINE_DATE_POSTED >= '2022-04-01'



--PURCHASE_ORDER_NUMBER = '7200884882'
--1 = 1
--JOURNAL_ID = '5200843430'
--AND JOURNAL_LINE_NUMBER = 3


--LINE_JOURNAL_ORIGIN_CODE = 'PR'

--LINE_JOURNAL_ORIGIN_CODE = 'KR' AND
--VENDOR_ID in ('0001001957','0005000435', '0001000220') AND
--DESCRIPTION is not null

--JOURNAL_ID = '1900427363'
--AND JOURNAL_LINE_NUMBER = 55
--AND


--and VENDOR_ID = '0001001957'


--LINE_DATE_CREATED >= DATEADD(DAY, -10, GETDATE()) or
--EDW_CREATE_DATE >= DATEADD(DAY, -10, GETDATE()) or
--EDW_UPDATE_DATE >= DATEADD(DAY, -10, GETDATE()) --or
--CONTROL_DATE_POSTED >= DATEADD(DAY, -10, GETDATE())


)
--and	
--LINE_DATE_POSTED between 
--DATEADD(DAY, -20000, GETDATE())
--and
--DATEADD(DAY, -0, GETDATE())
--)

--AND
--(
--TTH_CENTER = 'UH777604853' OR
--TTH_CENTER = '000410006409'
--TTH_CENTER = '000410007198' and TTH_ACCOUNT = '23501090'

--)

--Exclude outliers
--LINE_DATE_POSTED between '1998-04-01' and '2030-03-31'

AND
(
	(

		TTH_ACCOUNT between '2000000' and '29999999' --Same result as next line, but much faster
	--	AND	TTH_ACCOUNT = '21405003'
		--TTH_ACCOUNT like '2_______' --and
		--JOURNAL_ID = '0107216190' and
		--JOURNAL_LINE_NUMBER = 2
		--TTH_ACCOUNT &lt;&gt; '21900098' and 
		--TTH_ACCOUNT &lt;&gt; '29900000'
	)
--OR 
	--(
		--This condition pulls exactly the opening balance from FY 05/06. Do not consider any other opening balance. Include GL account if it's not an opening balance
		--TTH_ACCOUNT = '21900098' and
		--(
			--DESCRIPTION like '106 - 05/06 OPENING BALANCE%' or 
			--DESCRIPTION like '103 - 05/06 OPENING BALANCE%'

		--)
		
--OR TTH_ACCOUNT = '81002'
--OR TTH_ACCOUNT = '89010'		
		
	--)
	
	)

--and
--( 
--JOURNAL_ID = '1900262748'
--and JOURNAL_LINE_NUMBER = 2
--)

</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <cached_row_meta_active>N</cached_row_meta_active>
    <row-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>LEDGER_ENTITY_ID</name>
        <length>5</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LEDGER_ENTITY_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_ID</name>
        <length>20</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Date</type>
        <storagetype>normal</storagetype>
        <name>EFFECTIVE_DATE</name>
        <length>-1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>EFFECTIVE_DATE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Integer</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_SEQUENCE_NUMBER</name>
        <length>9</length>
        <precision>0</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_SEQUENCE_NUMBER</comments>
        <conversion_Mask>####0;-####0</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Integer</type>
        <storagetype>normal</storagetype>
        <name>SUSPENSE_SEQUENCE_NUMBER_NBR</name>
        <length>9</length>
        <precision>0</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>SUSPENSE_SEQUENCE_NUMBER_NBR</comments>
        <conversion_Mask>####0;-####0</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>ACCRUAL_REVERSAL_INDICATOR</name>
        <length>2</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>ACCRUAL_REVERSAL_INDICATOR</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Integer</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_LINE_NUMBER</name>
        <length>15</length>
        <precision>0</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_LINE_NUMBER</comments>
        <conversion_Mask>####0;-####0</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_LINE_STATUS</name>
        <length>1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_LINE_STATUS</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>LINE_LEDGER_ENTITY_ID</name>
        <length>5</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_LEDGER_ENTITY_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>TTH_ACCOUNT</name>
        <length>14</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>TTH_ACCOUNT</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>TTH_CENTER</name>
        <length>24</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>TTH_CENTER</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>ACCOUNT_TYPE_CODE</name>
        <length>1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>ACCOUNT_TYPE_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Date</type>
        <storagetype>normal</storagetype>
        <name>LINE_DATE_CREATED</name>
        <length>-1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_DATE_CREATED</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Integer</type>
        <storagetype>normal</storagetype>
        <name>LINE_POSTING_YEAR</name>
        <length>9</length>
        <precision>0</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_POSTING_YEAR</comments>
        <conversion_Mask>####0;-####0</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Integer</type>
        <storagetype>normal</storagetype>
        <name>LINE_POSTING_PERIOD</name>
        <length>9</length>
        <precision>0</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_POSTING_PERIOD</comments>
        <conversion_Mask>####0;-####0</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>LINE_AMOUNT_CLASS_1_TYPE</name>
        <length>10</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_AMOUNT_CLASS_1_TYPE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>DEBIT_CREDIT_CODE_1</name>
        <length>1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>DEBIT_CREDIT_CODE_1</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>LINE_JOURNAL_ORIGIN_CODE</name>
        <length>2</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_JOURNAL_ORIGIN_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>LINE_JOURNAL_ORIGIN_DESCR</name>
        <length>35</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_JOURNAL_ORIGIN_DESCR</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>SOURCE_DOCUMENT_REFERENCE</name>
        <length>100</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>SOURCE_DOCUMENT_REFERENCE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>DESCRIPTION</name>
        <length>80</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>DESCRIPTION</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>PRIMARY_DEBIT_CREDIT_CODE</name>
        <length>1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>PRIMARY_DEBIT_CREDIT_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Number</type>
        <storagetype>normal</storagetype>
        <name>PRIMARY_AMOUNT</name>
        <length>15</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>PRIMARY_AMOUNT</comments>
        <conversion_Mask>####0.0#########;-####0.0#########</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>TRANSACTION_CURRENCY_CODE</name>
        <length>3</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>TRANSACTION_CURRENCY_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>PRIMARY_CURRENCY_CODE</name>
        <length>3</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>PRIMARY_CURRENCY_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Number</type>
        <storagetype>normal</storagetype>
        <name>TRANS_TO_PRIM_EXCHANGE_RATE</name>
        <length>15</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>TRANS_TO_PRIM_EXCHANGE_RATE</comments>
        <conversion_Mask>####0.0#########;-####0.0#########</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Number</type>
        <storagetype>normal</storagetype>
        <name>TRANSACTION_AMOUNT</name>
        <length>15</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>TRANSACTION_AMOUNT</comments>
        <conversion_Mask>####0.0#########;-####0.0#########</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>CURRENCY_RATE_DATE</name>
        <length>30</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>CURRENCY_RATE_DATE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>LINE_USER_ID</name>
        <length>30</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_USER_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Date</type>
        <storagetype>normal</storagetype>
        <name>LINE_DATE_POSTED</name>
        <length>-1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LINE_DATE_POSTED</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_DESCRIPTION</name>
        <length>35</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_DESCRIPTION</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_STATUS_CODE</name>
        <length>1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_STATUS_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>CONTROL_AMOUNT_CLASS_1_TYPE</name>
        <length>10</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>CONTROL_AMOUNT_CLASS_1_TYPE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_TYPE_CODE</name>
        <length>2</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_TYPE_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>ACCRUAL_REVERSAL_DATE</name>
        <length>30</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>ACCRUAL_REVERSAL_DATE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Integer</type>
        <storagetype>normal</storagetype>
        <name>CONTROL_POSTING_PERIOD</name>
        <length>9</length>
        <precision>0</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>CONTROL_POSTING_PERIOD</comments>
        <conversion_Mask>####0;-####0</conversion_Mask>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_VOUCHER</name>
        <length>15</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_VOUCHER</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>CONTROL_USER_ID</name>
        <length>30</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>CONTROL_USER_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>INTER_ENTITY_JOURNAL_INDICATOR</name>
        <length>1</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>INTER_ENTITY_JOURNAL_INDICATOR</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>CONTROL_DATE_POSTED</name>
        <length>30</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>CONTROL_DATE_POSTED</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>SUSPENSE_ID</name>
        <length>5</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>SUSPENSE_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>CONTROL_JOURNAL_ORIGIN_CODE</name>
        <length>2</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>CONTROL_JOURNAL_ORIGIN_CODE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>CONTROL_JOURNAL_ORIGIN_DESCR</name>
        <length>35</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>CONTROL_JOURNAL_ORIGIN_DESCR</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>JOURNAL_NOTE</name>
        <length>255</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>JOURNAL_NOTE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>ASSET_ID</name>
        <length>12</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>ASSET_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>VENDOR_ID</name>
        <length>10</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>VENDOR_ID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>OLD_ACCOUNT</name>
        <length>14</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>OLD_ACCOUNT</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>OLD_CENTER</name>
        <length>14</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>OLD_CENTER</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>OLD_ENTITY</name>
        <length>5</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>OLD_ENTITY</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>OLD_LINE_ENTITY</name>
        <length>10</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>OLD_LINE_ENTITY</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>PURCHASE_ORDER_NUMBER</name>
        <length>10</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>PURCHASE_ORDER_NUMBER</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>PURCHASE_ORDER_LINE</name>
        <length>10</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>PURCHASE_ORDER_LINE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Timestamp</type>
        <storagetype>normal</storagetype>
        <name>EDW_UPDATE_DATE</name>
        <length>3</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>EDW_UPDATE_DATE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Timestamp</type>
        <storagetype>normal</storagetype>
        <name>EDW_CREATE_DATE</name>
        <length>3</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>EDW_CREATE_DATE</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>String</type>
        <storagetype>normal</storagetype>
        <name>UNIQUEID</name>
        <length>64</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>UNIQUEID</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
      <value-meta>
        <type>Timestamp</type>
        <storagetype>normal</storagetype>
        <name>LastUpdate</name>
        <length>7</length>
        <precision>-1</precision>
        <origin>edw.EDW_POSTED_JOURNAL_COMBINED</origin>
        <comments>LastUpdate</comments>
        <conversion_Mask/>
        <decimal_symbol>.</decimal_symbol>
        <grouping_symbol>,</grouping_symbol>
        <currency_symbol/>
        <trim_type>none</trim_type>
        <case_insensitive>N</case_insensitive>
        <collator_disabled>Y</collator_disabled>
        <collator_strength>0</collator_strength>
        <sort_descending>N</sort_descending>
        <output_padding>N</output_padding>
        <date_format_lenient>N</date_format_lenient>
        <date_format_locale>en_US</date_format_locale>
        <date_format_timezone>America/New_York</date_format_timezone>
        <lenient_string_to_number>N</lenient_string_to_number>
      </value-meta>
    </row-meta>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>720</xloc>
      <yloc>384</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform>
    <name>null -> blank</name>
    <type>IfNull</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <replaceAllByValue/>
    <replaceAllMask/>
    <selectFields>N</selectFields>
    <selectValuesType>Y</selectValuesType>
    <setEmptyStringAll>N</setEmptyStringAll>
    <valuetypes>
      <valuetype>
        <name>String</name>
        <value/>
        <mask/>
        <set_type_empty_string>Y</set_type_empty_string>
      </valuetype>
    </valuetypes>
    <fields>
      </fields>
    <attributes/>
    <cluster_schema/>
    <GUI>
      <xloc>4192</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
    </GUI>
  </transform>
  <transform_error_handling>
    <error>
      <source_transform>Transaction Upsert</source_transform>
      <target_transform>Error Date Transactions</target_transform>
      <is_enabled>Y</is_enabled>
      <nr_valuename>NoOfErrors</nr_valuename>
      <descriptions_valuename>ErrorDescription</descriptions_valuename>
      <fields_valuename/>
      <codes_valuename/>
      <max_errors/>
      <max_pct_errors/>
      <min_pct_rows/>
    </error>
  </transform_error_handling>
  <attributes/>
</pipeline>
